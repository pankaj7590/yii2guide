<article class="markdown-body entry-content" itemprop="text"><h1><a id="user-content-yii-2-advanced-project-template" class="anchor" href="#yii-2-advanced-project-template" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Yii 2 Advanced Project Template</h1>

<p>Yii 2 Advanced Project Template is a skeleton <a href="http://www.yiiframework.com/">Yii 2</a> application best for
developing complex Web applications with multiple tiers.</p>

<p>The template includes three tiers: front end, back end, and console, each of which
is a separate Yii application.</p>

<p>The template is designed to work in a team development environment. It supports
deploying the application in different environments.</p>

<p>It also goes a bit further regarding features and provides essential database, signup and password
restore out of the box.</p>


<article class="markdown-body entry-content" itemprop="text"><h1><a id="user-content-installation" class="anchor" href="#installation" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installation</h1>

<h2><a id="user-content-requirements" class="anchor" href="#requirements" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Requirements</h2>

<p>The minimum requirement by this project template is that your Web server supports PHP 5.4.0.</p>

<h2><a id="user-content-installing-using-composer" class="anchor" href="#installing-using-composer" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installing using Composer</h2>

<p>If you do not have <a href="http://getcomposer.org/">Composer</a>, follow the instructions in the
<a href="https://github.com/yiisoft/yii2/blob/master/docs/guide/start-installation.md#installing-via-composer">Installing Yii</a> section of the definitive guide to install it.</p>

<p>With Composer installed, you can then install the application using the following commands:</p>

<pre><code>composer global require "fxp/composer-asset-plugin:^1.2.0"
composer create-project --prefer-dist yiisoft/yii2-app-advanced yii-application
</code></pre>

<p>The first command installs the <a href="https://github.com/francoispluchino/composer-asset-plugin/">composer asset plugin</a>
which allows managing bower and npm package dependencies through Composer. You only need to run this command
once for all. The second command installs the advanced application in a directory named <code>yii-application</code>.
You can choose a different directory name if you want.</p>

<h2><a id="user-content-install-from-an-archive-file" class="anchor" href="#install-from-an-archive-file" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Install from an Archive File</h2>

<p>Extract the archive file downloaded from <a href="http://www.yiiframework.com/download/">yiiframework.com</a> to
a directory named <code>advanced</code> that is directly under the Web root.</p>

<p>Then follow the instructions given in the next subsection.</p>

<h2><a id="user-content-preparing-application" class="anchor" href="#preparing-application" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Preparing application</h2>

<p>After you install the application, you have to conduct the following steps to initialize
the installed application. You only need to do these once for all.</p>

<ol>
<li><p>Open a console terminal, execute the <code>init</code> command and select <code>dev</code> as environment.</p>

<pre><code>/path/to/php-bin/php /path/to/yii-application/init
</code></pre>

<p>If you automate it with a script you can execute <code>init</code> in non-interactive mode.</p>

<pre><code>/path/to/php-bin/php /path/to/yii-application/init --env=Production --overwrite=All
</code></pre></li>
<li><p>Create a new database and adjust the <code>components['db']</code> configuration in <code>common/config/main-local.php</code> accordingly.</p></li>
<li><p>Open a console terminal, apply migrations with command <code>/path/to/php-bin/php /path/to/yii-application/yii migrate</code>.</p></li>
<li><p>Set document roots of your web server:</p>

<ul>
<li>for frontend <code>/path/to/yii-application/frontend/web/</code> and using the URL <code>http://frontend.dev/</code></li>
<li>for backend <code>/path/to/yii-application/backend/web/</code> and using the URL <code>http://backend.dev/</code></li>
</ul>

<p>For Apache it could be the following:</p>

<div class="highlight highlight-source-apache-config"><pre>   &lt;<span class="pl-ent">VirtualHost</span> *:80&gt;
       <span class="pl-c1">ServerName</span> frontend.dev
       <span class="pl-c1">DocumentRoot</span> <span class="pl-s"><span class="pl-pds">"</span>/path/to/yii-application/frontend/web/<span class="pl-pds">"</span></span>

       &lt;<span class="pl-ent">Directory</span> "/path/to/yii-application/frontend/web/"&gt;
           <span class="pl-c"># use mod_rewrite for pretty URL support</span>
           <span class="pl-c1">RewriteEngine</span> on
           <span class="pl-c"># If a directory or a file exists, use the request directly</span>
           <span class="pl-c1">RewriteCond</span> <span class="pl-c1">%{REQUEST_FILENAME}</span> <span class="pl-s">!-f</span>
           <span class="pl-c1">RewriteCond</span> <span class="pl-c1">%{REQUEST_FILENAME}</span> <span class="pl-s">!-d</span>
           <span class="pl-c"># Otherwise forward the request to index.php</span>
           <span class="pl-c1">RewriteRule</span> <span class="pl-sr">.</span> <span class="pl-s">index.php</span>

           <span class="pl-c"># use index.php as index file</span>
           <span class="pl-c1">DirectoryIndex</span> index.php

           <span class="pl-c"># ...other settings...</span>
       &lt;/<span class="pl-ent">Directory</span>&gt;
   &lt;/<span class="pl-ent">VirtualHost</span>&gt;

   &lt;<span class="pl-ent">VirtualHost</span> *:80&gt;
       <span class="pl-c1">ServerName</span> backend.dev
       <span class="pl-c1">DocumentRoot</span> <span class="pl-s"><span class="pl-pds">"</span>/path/to/yii-application/backend/web/<span class="pl-pds">"</span></span>

       &lt;<span class="pl-ent">Directory</span> "/path/to/yii-application/backend/web/"&gt;
           <span class="pl-c"># use mod_rewrite for pretty URL support</span>
           <span class="pl-c1">RewriteEngine</span> on
           <span class="pl-c"># If a directory or a file exists, use the request directly</span>
           <span class="pl-c1">RewriteCond</span> <span class="pl-c1">%{REQUEST_FILENAME}</span> <span class="pl-s">!-f</span>
           <span class="pl-c1">RewriteCond</span> <span class="pl-c1">%{REQUEST_FILENAME}</span> <span class="pl-s">!-d</span>
           <span class="pl-c"># Otherwise forward the request to index.php</span>
           <span class="pl-c1">RewriteRule</span> <span class="pl-sr">.</span> <span class="pl-s">index.php</span>

           <span class="pl-c"># use index.php as index file</span>
           <span class="pl-c1">DirectoryIndex</span> index.php

           <span class="pl-c"># ...other settings...</span>
       &lt;/<span class="pl-ent">Directory</span>&gt;
   &lt;/<span class="pl-ent">VirtualHost</span>&gt;</pre></div>

<p>For nginx:</p>

<div class="highlight highlight-source-nginx"><pre>   <span class="pl-k">server</span> {
       <span class="pl-k">charset</span> utf-8;
       <span class="pl-k">client_max_body_size</span> <span class="pl-c1">128M</span>;

       <span class="pl-k">listen</span> <span class="pl-s">80</span>; <span class="pl-c">## listen for ipv4</span>
       <span class="pl-c">#listen [::]:80 default_server ipv6only=on; ## listen for ipv6</span>

       <span class="pl-k">server_name</span> frontend.dev;
       <span class="pl-k">root</span>        /path/to/yii-application/frontend/web/;
       <span class="pl-k">index</span>       index.php;

       <span class="pl-k">access_log</span>  /path/to/yii-application/log/frontend-access.log;
       <span class="pl-k">error_log</span>   /path/to/yii-application/log/frontend-error.log;

       <span class="pl-k">location</span> <span class="pl-en">/ </span>{
           <span class="pl-c"># Redirect everything that isn't a real file to index.php</span>
           <span class="pl-k">try_files</span> <span class="pl-smi">$uri</span> <span class="pl-smi">$uri</span>/ /index.php<span class="pl-smi">$is_args$args</span>;
       }

       <span class="pl-c"># uncomment to avoid processing of calls to non-existing static files by Yii</span>
       <span class="pl-c">#location ~ \.(js|css|png|jpg|gif|swf|ico|pdf|mov|fla|zip|rar)$ {</span>
       <span class="pl-c">#    try_files $uri =404;</span>
       <span class="pl-c">#}</span>
       <span class="pl-c">#error_page 404 /404.html;</span>

       <span class="pl-c"># deny accessing php files for the /assets directory</span>
       <span class="pl-k">location</span> ~ <span class="pl-sr">^/assets/.*\.php$ </span>{
           <span class="pl-k">deny</span><span class="pl-c1"> all</span>;
       }

       <span class="pl-k">location</span> ~ <span class="pl-sr">\.php$ </span>{
           <span class="pl-k">include</span> fastcgi_params;
           <span class="pl-k">fastcgi_param</span> SCRIPT_FILENAME <span class="pl-smi">$document_root$fastcgi_script_name</span>;
           <span class="pl-k">fastcgi_pass</span> 127.0.0.1:9000;
           <span class="pl-c">#fastcgi_pass unix:/var/run/php5-fpm.sock;</span>
           <span class="pl-k">try_files</span> <span class="pl-smi">$uri</span> <span class="pl-c1">=404</span>;
       }

       <span class="pl-k">location</span> ~* <span class="pl-sr">/\. </span>{
           <span class="pl-k">deny</span><span class="pl-c1"> all</span>;
       }
   }

   <span class="pl-k">server</span> {
       <span class="pl-k">charset</span> utf-8;
       <span class="pl-k">client_max_body_size</span> <span class="pl-c1">128M</span>;

       <span class="pl-k">listen</span> <span class="pl-s">80</span>; <span class="pl-c">## listen for ipv4</span>
       <span class="pl-c">#listen [::]:80 default_server ipv6only=on; ## listen for ipv6</span>

       <span class="pl-k">server_name</span> backend.dev;
       <span class="pl-k">root</span>        /path/to/yii-application/backend/web/;
       <span class="pl-k">index</span>       index.php;

       <span class="pl-k">access_log</span>  /path/to/yii-application/log/backend-access.log;
       <span class="pl-k">error_log</span>   /path/to/yii-application/log/backend-error.log;

       <span class="pl-k">location</span> <span class="pl-en">/ </span>{
           <span class="pl-c"># Redirect everything that isn't a real file to index.php</span>
           <span class="pl-k">try_files</span> <span class="pl-smi">$uri</span> <span class="pl-smi">$uri</span>/ /index.php<span class="pl-smi">$is_args$args</span>;
       }

       <span class="pl-c"># uncomment to avoid processing of calls to non-existing static files by Yii</span>
       <span class="pl-c">#location ~ \.(js|css|png|jpg|gif|swf|ico|pdf|mov|fla|zip|rar)$ {</span>
       <span class="pl-c">#    try_files $uri =404;</span>
       <span class="pl-c">#}</span>
       <span class="pl-c">#error_page 404 /404.html;</span>

       <span class="pl-c"># deny accessing php files for the /assets directory</span>
       <span class="pl-k">location</span> ~ <span class="pl-sr">^/assets/.*\.php$ </span>{
           <span class="pl-k">deny</span><span class="pl-c1"> all</span>;
       }

       <span class="pl-k">location</span> ~ <span class="pl-sr">\.php$ </span>{
           <span class="pl-k">include</span> fastcgi_params;
           <span class="pl-k">fastcgi_param</span> SCRIPT_FILENAME <span class="pl-smi">$document_root$fastcgi_script_name</span>;
           <span class="pl-k">fastcgi_pass</span> 127.0.0.1:9000;
           <span class="pl-c">#fastcgi_pass unix:/var/run/php5-fpm.sock;</span>
           <span class="pl-k">try_files</span> <span class="pl-smi">$uri</span> <span class="pl-c1">=404</span>;
       }

       <span class="pl-k">location</span> ~* <span class="pl-sr">/\. </span>{
           <span class="pl-k">deny</span><span class="pl-c1"> all</span>;
       }
   }</pre></div></li>
<li><p>Change the hosts file to point the domain to your server.</p>

<ul>
<li>Windows: <code>c:\Windows\System32\Drivers\etc\hosts</code></li>
<li>Linux: <code>/etc/hosts</code></li>
</ul>

<p>Add the following lines:</p>

<pre><code>127.0.0.1   frontend.dev
127.0.0.1   backend.dev
</code></pre></li>
</ol>

<p>To login into the application, you need to first sign up, with any of your email address, username and password.
Then, you can login into the application with same email address and password at any time.</p>

<blockquote>
<p>Note: if you want to run advanced template on a single domain so <code>/</code> is frontend and <code>/admin</code> is backend, refer
to <a href="/yiisoft/yii2-app-advanced/blob/master/docs/guide/topic-shared-hosting.md">Using advanced project template at shared hosting</a>.</p>
</blockquote>

<h2><a id="user-content-installing-using-vagrant" class="anchor" href="#installing-using-vagrant" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installing using Vagrant</h2>

<p>This way is the easiest but long (~20 min).</p>

<p><strong>This installation way doesn't require pre-installed software (such as web-server, PHP, MySQL etc.)</strong> - just do next steps!</p>

<h4><a id="user-content-manual-for-linuxunix-users" class="anchor" href="#manual-for-linuxunix-users" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Manual for Linux/Unix users</h4>

<ol>
<li>Install <a href="https://www.virtualbox.org/wiki/Downloads">VirtualBox</a></li>
<li>Install <a href="https://www.vagrantup.com/downloads.html">Vagrant</a></li>
<li>Create GitHub <a href="https://github.com/blog/1509-personal-api-tokens">personal API token</a></li>
<li><p>Prepare project:</p>

<div class="highlight highlight-source-shell"><pre>git clone https://github.com/yiisoft/yii2-app-advanced.git
<span class="pl-c1">cd</span> yii2-app-advanced/vagrant/config
cp vagrant-local.example.yml vagrant-local.yml</pre></div></li>
<li><p>Place your GitHub personal API token to <code>vagrant-local.yml</code></p></li>
<li><p>Change directory to project root:</p>

<div class="highlight highlight-source-shell"><pre><span class="pl-c1">cd</span> yii2-app-advanced</pre></div></li>
<li><p>Run commands:</p>

<div class="highlight highlight-source-shell"><pre>vagrant plugin install vagrant-hostmanager
vagrant up</pre></div></li>
</ol>

<p>That's all. You just need to wait for completion! After that you can access project locally by URLs:</p>

<ul>
<li>frontend: <a href="http://y2aa-frontend.dev">http://y2aa-frontend.dev</a></li>
<li>backend: <a href="http://y2aa-backend.dev">http://y2aa-backend.dev</a></li>
</ul>

<h4><a id="user-content-manual-for-windows-users" class="anchor" href="#manual-for-windows-users" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Manual for Windows users</h4>

<ol>
<li>Install <a href="https://www.virtualbox.org/wiki/Downloads">VirtualBox</a></li>
<li>Install <a href="https://www.vagrantup.com/downloads.html">Vagrant</a></li>
<li>Reboot</li>
<li>Create GitHub <a href="https://github.com/blog/1509-personal-api-tokens">personal API token</a></li>
<li><p>Prepare project:</p>

<ul>
<li>download repo <a href="https://github.com/yiisoft/yii2-app-advanced/archive/master.zip">yii2-app-advanced</a></li>
<li>unzip it</li>
<li>go into directory <code>yii2-app-advanced-master/vagrant/config</code></li>
<li>copy <code>vagrant-local.example.yml</code> to <code>vagrant-local.yml</code></li>
</ul></li>
<li><p>Place your GitHub personal API token to <code>vagrant-local.yml</code></p></li>
<li><p>Add the following lines to <a href="https://en.wikipedia.org/wiki/Hosts_(file)">hosts file</a>:</p>

<pre><code>192.168.83.137 y2aa-frontend.dev
192.168.83.137 y2aa-backend.dev
</code></pre></li>
<li><p>Open terminal (<code>cmd.exe</code>), <strong>change directory to project root</strong> and run commands:</p>

<div class="highlight highlight-source-shell"><pre>vagrant plugin install vagrant-hostmanager
vagrant up</pre></div>

<p>(You can read <a href="http://www.wikihow.com/Change-Directories-in-Command-Prompt">here</a> how to change directories in command prompt) </p></li>
</ol>

<p>That's all. You just need to wait for completion! After that you can access project locally by URLs:</p>

<ul>
<li>frontend: <a href="http://y2aa-frontend.dev">http://y2aa-frontend.dev</a></li>
<li>backend: <a href="http://y2aa-backend.dev">http://y2aa-backend.dev</a></li>
</ul>
</article>


<a href="https://github.com/yiisoft/yii2-app-advanced/blob/master/docs/guide/README.md">For more information</a>